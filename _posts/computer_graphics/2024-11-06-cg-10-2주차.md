---
title: "Projection Transform ê°œë…ê³¼ Parallel Projection"
excerpt: ""

categories:
  - Computer Graphics
tags:
  - [tag1, tag2]

permalink: /categories/computer_graphics/projection_transform/

toc: true
toc_sticky: true

date: 2024-11-06
last_modified_at: 2024-11-06
---
# ğŸ¦¥ Projection Transform
ì´ì „ ê¸€ì—ì„œ ì •ë¦¬í•œëŒ€ë¡œ View Transformì„ ìˆ˜í–‰í•˜ë©´ ì¹´ë©”ë¼ ì¢Œí‘œê³„ ê¸°ì¤€ìœ¼ë¡œ ê°ì²´ë“¤ì˜ ìœ„ì¹˜ì™€ ë°©í–¥ì´ ë³€í™˜ ëœë‹¤ê³  í–ˆë‹¤. <br>
ì´ í›„, ìš°ë¦¬ëŠ” ì¹´ë©”ë¼ ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ ì¹´ë©”ë¼ê°€ ë³¼ ìˆ˜ ìˆëŠ” 3ì°¨ì› ê³µê°„ì˜ ë²”ìœ„ì¸ View Volumeì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ì •ì˜í•œ View Volumeì•ˆì˜ ì ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ Projection Transformì„ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨, Clippingê³¼ Nomarlize, ê°ì²´ì˜ ì›ê·¼ê°ì„ ì²˜ë¦¬í•œë‹¤. ì´ ê³¼ì •ì„ ëª¨ë‘ ê±°ì¹˜ë©´ Normalized Device Coordinate(NDC)ë¥¼ ì–»ì„ ìˆ˜ ìˆê³ , ë¹„ë¡œì†Œ í™”ë©´ í”½ì…€ ì¢Œí‘œë¡œ ë§¤í•‘í•  ìˆ˜ ìˆëŠ” Window Coordinatesë¡œ ë³€í™˜í•  ì¤€ë¹„ë¥¼ ë§ˆì¹˜ê²Œ ëœë‹¤.<br>

ë”°ë¼ì„œ Projection Transformì˜ ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
> 3D ê³µê°„ì—ì„œ ì •ì˜ëœ ë¬¼ì²´ì˜ ì¢Œí‘œë¥¼ 2D í™”ë©´ì— ì ì ˆí•˜ê²Œ íˆ¬ì˜í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë³€í™˜ í–‰ë ¬ì„ ê³„ì‚°í•˜ê³ , ì´ ë³€í™˜ í–‰ë ¬ë¡œ ë¶€í„° ì¹´ë©”ë¼ ì¢Œí‘œê³„ë¥¼ **Normalized Device Coordinates(NDC)**ë¡œ ë³€í™˜í•´ì„œ í™”ë©´ì— ê·¸ë¦´ ì¤€ë¹„ë¥¼ í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ê²ƒì´ë‹¤.

<br><br>



## Parallel Projections
![projection1](/assets\images\posts_img\graphics\projection1.png)

**Parallel Projection**ì€ 3D ê°ì²´ë¥¼ 2D í‰ë©´ì— íˆ¬ì˜í•  ë•Œ, **í‰í–‰í•œ ì„ ë“¤ì„ ë”°ë¼ íˆ¬ì˜í•˜ëŠ” ë°©ì‹**ì´ë‹¤. ì´ ë°©ì‹ì€ íˆ¬ì˜í•˜ëŠ” ì„ ì´ ëª¨ë‘ í‰í–‰í•˜ê²Œ ìœ ì§€ë˜ë©°, ì¼ë°˜ì ìœ¼ë¡œ ë¬¼ì²´ì˜ í¬ê¸°ë¥¼ ì›ê·¼ê° ì—†ì´ ë™ì¼í•˜ê²Œ í‘œí˜„í•œë‹¤.<br>


<br>

### Orthographic Projection
![projection2](/assets\images\posts_img\graphics\projection2.png)

**Orthographic Projection**ì€ Parallel Projectionì˜ í•œ ì¢…ë¥˜ë¡œ, **íˆ¬ì˜ì„ ì´ íˆ¬ì˜ í‰ë©´ì— ìˆ˜ì§ìœ¼ë¡œ ë§Œë‚˜ëŠ” íŠ¹ì„±**ì„ ê°€ì§€ê³  ìˆë‹¤. Orthographic Projectionì€ ë¬¼ì²´ê°€ ì¹´ë©”ë¼ë¡œë¶€í„° ë©€ì–´ì ¸ë„ í¬ê¸°ê°€ ë³€í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, Parallelê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì›ê·¼ê°ì´ ì—†ëŠ” í‰ë©´ì ì¸ ì´ë¯¸ì§€ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.<br>

- ê°ì²´ì˜ ì‹¤ì œ í¬ê¸°ë¥¼ ì™œê³¡ ì—†ì´ í‘œí˜„í•˜ê¸° ë•Œë¬¸ì—, ì •í™•í•œ ê¸¸ì´ì™€ ë¹„ìœ¨ì„ ìœ ì§€í•´ì•¼ í•˜ëŠ” ë„ë©´ ì‘ì—…ì— ì í•©

<br><br>



## ì§ì ‘ OpenGLë¡œ Orthographic Viewing êµ¬í•´ë³´ê¸°
ì¹´ë©”ë¼ê°€ ì›ì ì—ì„œ -z ë°©í–¥ ë°”ë¼ë³´ëŠ” Orthographic Viewingì„ êµ¬í˜„í•´ë³´ë ¤ê³  í•œë‹¤. ì˜›ë‚  OpenGLì—ì„œ ì‚¬ìš©í•˜ë˜, Orthographic Projection Transformì„ ìˆ˜í–‰í•˜ëŠ” ë³€í™˜ í–‰ë ¬ì„ ë§Œë“œëŠ” í•¨ìˆ˜ì¸ glOrtho()ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ëª©ì ì´ë©°, ë‹¨ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

> ë‹¨ìˆœí•œ íˆ¬ì˜ì´ë¯€ë¡œ Clip Coordinateë¥¼ ë”°ë¡œ êµ¬í•˜ì§€ ì•Šê³ , í•œ ë²ˆì— nomarlizedê³„ì‚°í•  ì˜ˆì •

<br>

1. glOrthoì˜ ì¸ìë¡œ (xmin, xmax, ymin, ymax, near, far)ë¥¼ ë„˜ê²¨ì¤€ë‹¤.
   - ì´ ê°’ë“¤ì€ View Volumeì„ ì •ì˜í•˜ê²Œ ëœë‹¤. (Orthographic Projectionì˜ ê²½ìš° View Volumeì€ ì§ìœ¡ë©´ì²´ í˜•íƒœë¡œ ì •ì˜ëœë‹¤.)
2. ì •ì˜í•œ View Volumeì„ ì›ì  ê¸°ì¤€ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³ (ë‹¨ zì¶•ì€ ì‹œì‘ì ì´ 0ì´ ë˜ë„ë¡ í•œë‹¤. ê·¸ë˜ì•¼ ë‹¤ìŒ ì½”ë“œì—ì„œ ë³´ì¼ ê²ƒì„), Nomarlizedí•˜ì—¬ Canonical view volumeì„ êµ¬í•œë‹¤.
   - Normalized view volume ë°–ì˜ ì ì€ OpenGLì—ì„œ ìë™ìœ¼ë¡œ Rasterizerí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, Clipping ê³¼ì •ë„ ìƒëµ

<br>

ìˆ˜ì‹ìœ¼ë¡œ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

![projection4](/assets\images\posts_img\graphics\projection4.png)

<br><br>

### ì½”ë“œ

```
#include <vgl.h>
#include <InitShader.h>
#include <mat.h>
#include "MyCube.h"
#include "MyPyramid.h"

MyCube cube;
MyPyramid pyramid;

GLuint program;
GLuint uMat;

mat4 g_Mat = mat4(1.0);

float g_Time = 0;
float g_aspect = 1.0f;			// aspect ratio(ì¢…íš¡ë¹„)
								// width/height > 1
float g_winWidth = 500;
float g_winHeight = 500;


void myInit()
{
	cube.Init();
	pyramid.Init();

	program = InitShader("vshader.glsl", "fshader.glsl");
	glUseProgram(program);
}

mat4 myLookAt(vec3 eye, vec3 focus, vec3 up)
{
	vec3 n = focus - eye;
	n = normalize(n);
	vec3 u = dot(n, up)*n;
	vec3 v = up - u;
	v = normalize(v);
	vec3 w = cross(v, -n);
	w = normalize(w);

	mat4 Rw(1.0f);
	Rw[0][0] = w.x;	Rw[0][1] = v.x;	Rw[0][2] = -n.x;
	Rw[1][0] = w.y;	Rw[1][1] = v.y;	Rw[1][2] = -n.y;
	Rw[2][0] = w.z;	Rw[2][1] = v.z;	Rw[2][2] = -n.z;

	mat4 Rc(1.0f);
	Rc[0][0] = w.x;	Rc[0][1] = w.y;	Rc[0][2] = w.z;
	Rc[1][0] = v.x;	Rc[1][1] = v.y;	Rc[1][2] = v.z;
	Rc[2][0] =-n.x;	Rc[2][1] =-n.y;	Rc[2][2] =-n.z;

//	Rc = transpose(Rw);
	mat4 T = Translate(-eye.x, -eye.y, -eye.z);
	
	return Rc * T;
}


mat4 myOrtho(float left, float right, 
	         float bottom, float top,
	         float zNear, float zFar)
{
	float cx = (left + right) / 2;
	float cy = (bottom + top) / 2;
	float cz = -zNear;

	float sx =  2 / (right - left);
	float sy =  2 / (top - bottom);
	float sz = 1 / (zFar - zNear);

	mat4 T = Translate(-cx, -cy, -cz);
	mat4 S = Scale(sx, sy, sz);
	return S * T;
}

void myDisplay()
{
	glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
	glEnable(GL_DEPTH_TEST);
	
	g_aspect = g_winWidth / (float)g_winHeight;
	glViewport(0, 0, g_winWidth, g_winHeight);

	GLuint uMat = glGetUniformLocation(program, "uMat");

	//quantize (ì–‘ìí™”)
	//0~z : në“±ë¶„í•´ì„œ ë‹¨ê³„ë¡œ í‘œí˜„í•˜ëŠ” ê²ƒ
	float ex = 2 * cos(2 * 3.141592 * g_Time / 2);
	float ez = 2 * sin(2 * 3.141592 * g_Time / 2);

	vec3 eye(ex, 2 * sin(g_Time) + 2, ez);
	vec3 focus(0, 0, 0);
	vec3 up(0, 1, 0);
	mat4 V = myLookAt(eye, focus, up);

	// aspect = width / height
	float xmax = 2;
	float ymax = xmax / g_aspect;
	mat4 P = myOrtho(-xmax, xmax, -ymax, ymax, 0, 10);

	mat4 M(1.0);
	glUniformMatrix4fv(uMat, 1, true, P*V*M);

	//pyramid.Draw(program);
	cube.Draw(program);
	glutSwapBuffers();
}

void myIdle()
{
	g_Time += 0.016f;
	Sleep(16);
	glutPostRedisplay();
}

void myReshape(int winW, int winH) {
	g_winWidth = winW;
	g_winHeight = winH;

}

int main(int argc, char ** argv)
{
	glutInit(&argc, argv);
	glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA|GLUT_DEPTH);
	glutInitWindowSize(g_winWidth,g_winHeight);
	glutCreateWindow("Cube and Pyramid");

	glewExperimental = true;
	glewInit();

	myInit();
	glutDisplayFunc(myDisplay);
	glutIdleFunc(myIdle);
	glutReshapeFunc(myReshape);

	glutMainLoop();

	return 0;
}
```




---- ìˆ˜ì—… ì‹œê°„ í•„ê¸° (Temp)------

- zê°’ì˜ ê°€ì‹œê±°ë¦¬ëŠ” 1ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ” ì´ìœ (ì™œ ê°€ì‹œê±°ë¦¬ê°€ ì •í•´ì§€ëŠ”ì§€) : zì€ ê¸°ë³¸ìœ¼ë¡œ float(ë§ì€ ë©”ëª¨ë¦¬, ëŠë¦° ì—°ì‚°)ì´ê¸° ë•Œë¬¸ì—, zbufferëŠ” ê±°ë¦¬ ê°’ì„ ë¹„íŠ¸ ë‹¨ìœ„ë¡œ ì •ìˆ˜í™”í•´ì„œ ê±°ë¦¬ë¥¼ ê¸°ì–µí•¨. ê·¸ë˜ì„œ ìµœëŒ€ ê°’ì„ ì •í•´ì£¼ì–´ì•¼ ê±°ë¦¬ë¥¼ ì •í™•íˆ ê³„ì‚°í•  ìˆ˜ ìˆìŒ.
- depth bufferì˜ í•´ìƒë„ ë•Œë¬¸ì— ì‹œì•¼ ê±°ë¦¬ì˜ ì œí•œì„ ì¤˜ì•¼í•¨

- glutInitWindowSize(500,500) - viewportê°€ 500,500ì´ê¸° ë•Œë¬¸ì— aspectë¥¼ ìµœì‹ í™”í•˜ì—¬ë„ 500,500ë§Œ ê·¸ë ¤ì§
- ë”°ë¼ì„œ glViewport() í•¨ìˆ˜ë¡œ ë·° í¬íŠ¸ë¥¼ ë‹¤ì‹œ ì„¤ì •
