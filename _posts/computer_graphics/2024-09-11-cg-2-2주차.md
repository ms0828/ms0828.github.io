---
title: "(OpenGL) GPU로 데이터를 전송하는 방법 - VBO"
excerpt: ""

categories:
  - Computer Graphics
tags:
  - [tag1, tag2]

permalink: /categories/computer_graphics/vbo/

toc: true
toc_sticky: true

date: 2024-09-12
last_modified_at: 2024-09-12
---

## 🦥GPU 메모리에 데이터를 전송하는 방법 - VBO
이전 글 '그래픽스 프로그래밍 접근 방법'에서 GPU에게 데이터 처리를 위임하는 것이 성능적으로 효율적인 것을 알았다면, 다음 고민해야 할 것은 GPU에게 데이터를 전송하는 방법이다. <br>

OpenGL에서 정점 데이터를 GPU 메모리에 복사하기 위해서는 VBO를 사용한다.
<br><br><br>


### Vertex Buffer Object (VBO)
VBO는 정점 데이터를 GPU 메모리에 저장하기 위한 버퍼이다. 3D 그래픽에서 사용하는 정점(Vertex) 데이터, 즉 좌표, 색상, 텍스처 좌표, 법선 벡터 등 다양한 데이터를 CPU에서 GPU로 전송하고 저장하는 데 사용된다. <br><br>

요약하면 다음과 같다. 
- VBO는 GPU 메모리에 정점 데이터를 저장하는 버퍼
- 정점의 위치, 색상, 텍스처 좌표 등의 정보를 포함
- OpenGL이 지속적인 데이터 전송 없이 GPU 메모리에서 직접 데이터를 읽어 렌더링할 수 있도록 도움

<br>

#### 왜 사용하는데? 
정점 데이터를 한 번에 GPU로 전송함으로써 렌더링할 때 마다 GPU가 데이터에 직접 접근할 수 있게 한다. 따라서 CPU와 GPU 간의 데이터 전송 비용을 줄인다.

<br><br>



#### 어떻게 사용하는데?

```
GLuint VBO;
glGenBuffers(1, &VBO);              // 1. VBO 생성
glBindBuffer(GL_ARRAY_BUFFER, VBO);   // 2. VBO 바인딩
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);  // 3. 정점 데이터를 VBO에 업로드
```

- glGenBuffers(): 새로운 VBO를 생성하는 함수
- glBindBuffer(GL_ARRAY_BUFFER, VBO): 이 함수는 VBO를 현재 활성화된 버퍼로 설정하는 함수 <br>
	> 이후에 호출되는 모든 정점 데이터 관련 작업이 이 VBO에 적용된다. (OpenGL은 현재 바인딩된 버퍼에 작업을 수행하므로, VBO를 바인딩해야 그 버퍼에 데이터를 올리거나 읽을 수 있음)
- glBufferData(): 지정된 VBO에 데이터를 실제로 업로드하는 함수 <br>
  > (vertices는 CPU에 있는 정점 데이터 배열로, 이를 GPU로 전송하여 VBO에 저장)<br>
	 > * 함수 인자 <br>
      1. 버퍼의 대상 (어떤 버퍼인지)<br>
				- GL_ARRAY_BUFFER : 정점 데이터를 위한 버퍼 <br>
				- GL_ELEMENT_ARRAY_BUFFER : 인덱스 데이터를 위한 버퍼 <br>
				- GL_UNIFORM_BUFFER : 셰이더의 uniform 변수를 위한 버퍼 <br>
      2. 버퍼에 저장할 데이터의 크기 (byte) <br>
      3. 버퍼에 복사할 실제 data의 주소 (포인터) <br>
      4. 데이터 사용 패턴 <br>
				- GL_STATIC_DRAW : 데이터가 한 번만 생성되고 여러 번 그릴 때 사용 <br>
				- GL_DYNAMIC_DRAW : 데이터가 여러 번 변경되고 여러 번 그려질 때 사용 <br>
				- GL_STREAM_DRAW: 데이터가 한 번만 생성되고, 한 번 그려지고 나서 더 이상 사용되지 않는 경우에 사용 <br>

<br><br>
