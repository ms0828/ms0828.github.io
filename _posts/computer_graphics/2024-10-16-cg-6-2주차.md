---
title: "Affine Transformations"
excerpt: ""

categories:
  - Computer Graphics
tags:
  - [tag1, tag2]

permalink: /categories/computer_graphics/affine_transformation/

toc: true
toc_sticky: true

date: 2024-10-16
last_modified_at: 2024-10-16
---
# 🦥 Affine Transformation
평행 이동과 투영 등의 비선형 변환을 동차 좌표계를 이용하여 선형성을 보존하면서 수행할 수 있게 하는 변환을 말한다.
> Affine Transformation은 **동차 좌표계**를 통해 효율적으로 표현되며, 이동, 회전, 스케일링 등 다양한 변환을 통합하여 하나의 행렬로 다룰 수 있다.
 
<br>

## Homogeneous Coordinates(동차 좌표계)
동차 좌표계는 공간의 좌표에 차원을 하나 더 확장하여, 평행 이동을 포함한 비선형 변환을 선형적으로 처리하기 위해 (즉, Affine Transformation을 수행하기 위해)사용되는 좌표계이다.<br>

> 예를 들어, 3D 좌표 (x,y,z)를 동차 좌표계를 이용하여 (x,y,z,w)로 확장하여 표현할 수 있다. (이 때, w는 확장을 위한 스케일링 인자로 사용)(w가 1이 아닌 경우 확대나 투영이 적용된 좌표로 해석된다.)

<br>

## 동차 좌표계에서 Affine Transformation 행렬의 구성
![Affine3](/assets\images\posts_img\graphics\affine3.png)

동촤 좌표계에서의 행렬은 위과 같이 확장된 형태로 표현될 수 있다.<br>
여기서 M(3x3)은 회전, 스케일 등 선형 변환을 나타내는 행렬이며, T(3x1)은 이동과 같이 비선형 변환을 나타내는 행렬이다. <br>

<br>

## 동차 좌표계의 대수적 비일관성
동차 좌표계는 특히 **평행 이동**이나 **원근 투영**과 같은 비선형 변환을 선형적으로 처리하는 데 유용하지만, 특정 연산을 할 때 대수적 일관성이 깨질 수 있다.
<br>

![Affine4](/assets\images\posts_img\graphics\affine4.png)

> 동차 좌표계로 확장된 차원의 마지막 성분 때문에 기존 좌표(확장된 w로 기존의 성분을 나누어서 복원한 좌표)의 일관된 연산이 나오지 않게 된다. 

<br><br>


## Affine Transformation의 활용 (2D)

### 평행 이동
2D 좌표 (x,y)를 동차 좌표인 (x,y,1)로 변환하고, 2D 평행 이동을 다음과 같은 3x3 변환 행렬로 표현할 때 T는 다음과 같다.

![Affine1](/assets\images\posts_img\graphics\affine1.png)

위 행렬을 (x,y,1)에 적용 시킴으로써, 다음과 같은 평행 이동이 적용된 좌표를 얻을 수 있다.

![Affine2](/assets\images\posts_img\graphics\affine2.png)

<br>

### Rotation (원점 기준)

### Rotation (Pivot 중심)

### Scaling (원점 기준)

### Scaling (Pivot 기준)

### Scaling (축 기준)

### Shear

### 반사

변환 행렬을 연속해서 곱하면, 오른쪽 변환 행렬 부터 변환

## Affine Transformation의 활용 (3D)

### 3차원에서의 Rotation
- Roation이란 한 점을 고정시키고 회전하는 것과 유사
- 회전이 복잡한 이유
- Translation은 최단 거리로 표현이 가능하나, Rotation이란 최단 거리로 표현이 복잡하다. (2D는 쉬움)
- 최단 거리가 표현이 불가능하면, 보간 처리가 불가능하다. (중간 값들을 찾을 수 없음) 
- 그래서 회전으로 인한 변화를 일반적으로 어떻게 표현할건데? 가 난제
- 2D에서는 회전의 최단 거리 표현이 가능!
- 3D에서는 회전의 최단 거리 표현이 복잡함!


## Euler's Rotation
- 3차원에서의 회전을 표현하는 방법 중 하나, 가장 General한 방법
- 회전을 특정 축(회전 축)을 중심으로 나타내면 최단 거리 표현이 가능하더라
- 회전 축과 각도로 표현 된다.
- 이걸 angle axis라고 부름
- 상태(회전)을 정하는데 필요한 파라미터의 개수를 degree of freedom(dof)
- 
- **Euler Angle** -> Rotation을 표현하는 방법 중 하나로, x,y,z축 회전을 순차적으로 적용시켜 Rotation을 표현 (적용시키는 회전 축의 순서에 따라 결과가 다름) (따라서 같은 각도에 따라 12개의 조합이 존재)


### 3차원 x 회전

### 3차원 y 회전

### 3차원 z 회전

특정 회전 축 u를 어떻게 찾을 것인가


Gimble

Euler Angle의 문제점
1. Gimble lock
- 회전 순서에 따라 회전 축(dof)를 하나를 읽는 현상
- 그래서 Euler Angle은 잘 사용하지 않음
2. Smooth Rotation
- 행렬 회전 값은 중간 값(보간)처리하기 어려움 (최단 거리 표현 모호)

애니메이션 분야에서는 회전 값의 보간 처리가 이슈여서 회전을 어떻게 표현하는가가 중요 이슈였음

위와 같은 문제를 해결하기 위해 나온 회전 표현 법 
Quaternions (행렬을 쓰지 않는)

